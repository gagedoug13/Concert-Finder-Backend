(this.webpackJsonpzip_show=this.webpackJsonpzip_show||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/neighborhoodjamz2.28860f51.png"},24:function(e,t,a){e.exports=a(35)},29:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(20),s=a.n(r),o=(a(29),a(10)),c=a(11),i=a(13),m=a(12),d=a(9),u=a(14),v=a(5),h=a(6);function E(e){return l.a.createElement("div",{className:"addressDiv"},l.a.createElement("div",{className:"addressFormDiv"},l.a.createElement("form",{action:"...",className:"addressForm",onSubmit:e.getGeoFromAddress},e.latitude?l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://maps.google.com/?ll="+e.latitude+","+e.longitude},l.a.createElement("img",{className:"locationIcon",src:"https://media.giphy.com/media/5dUpIQwwiHn2wQh10Z/giphy.gif"})):null,l.a.createElement("p",{className:"addressMessage"}),l.a.createElement("input",{className:"addressBar",type:"text",name:"searchBar",placeholder:"Enter an address"}))),l.a.createElement("p",{className:"locationOption"},"or"),l.a.createElement("button",{onClick:e.getGeoFromGeoButton,className:"addressButton",type:"submit"},"Use My Location"))}function g(e){return l.a.createElement("div",{className:"dateDiv"},l.a.createElement("form",null,l.a.createElement("p",{className:"dateMessage"},"Please select a day."),l.a.createElement("input",{className:"dateInputBar",id:"date",name:"dateInput",onChange:e.clickHandler,type:"date"}),l.a.createElement(v.b,{to:"/events"},e.lat&&e.date?l.a.createElement("button",{onClick:e.getMetroAndEvents,className:"dateButton",type:"submit",name:"addressButton"},"GO"):null)))}function p(e){return l.a.createElement("div",{className:"cardDiv"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-6"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-body"},l.a.createElement("p",{className:"cardDate"},new Date(e.event.start.date).toString().slice(0,10)+", "+new Date(e.event.start.date).toString().slice(11,15)),l.a.createElement("h5",{className:"card-title"},e.event.performance.length?e.event.performance[0].displayName:"Unknown Artist"),l.a.createElement("p",null,"at"),l.a.createElement("p",{className:"card-text"},e.event.venue.displayName),l.a.createElement("a",{className:"btn btn-primary",target:"_blank",href:e.event.uri},"More info"),l.a.createElement("p",{className:"distanceTag"},null==e.event.distance?"unknown":e.event.distance.toString().split("").slice(0,4)," mi"))))))}function f(){return l.a.createElement("div",{className:"loadingDiv"})}function y(e){return l.a.createElement("div",{className:"eventContainerDiv"},console.log(e.events,"from card container."),e.events?e.events.map((function(e){return e.map((function(e){return l.a.createElement("div",{key:e.id},l.a.createElement(p,{event:e}))}))})):null)}var N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).filterEventsByMilage=function(e){var t=a.props.totalEvents,n=[];console.log(a.props.totalEvents,"the events as they come into the function");var l=50;e&&(l=e.target.value.slice(0,2));var r=!0,s=!1,o=void 0;try{for(var c,i=t[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){for(var m=c.value,d=0,u=m.events.length;d<u;){var v=d+Math.floor((u-d)/2);m.events[v].distance>l?u=v:d=v+1}console.log(m.events,"in the function"),n.push(m.events.slice(0,d))}}catch(h){s=!0,o=h}finally{try{r||null==i.return||i.return()}finally{if(s)throw o}}a.setState({eventsByMilage:n,originalEvents:a.props.totalEvents})},a.state={eventsByMilage:null,originalEvents:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.props.totalEvents!==this.state.originalEvents&&this.filterEventsByMilage()}},{key:"render",value:function(){return l.a.createElement("div",{className:"displayEventsDiv"},this.props.totalEvents?l.a.createElement("div",{className:"filterForm"},l.a.createElement("label",{className:"filterLabel"},"See concerts within:"),l.a.createElement("select",{id:"filter",onChange:this.filterEventsByMilage},l.a.createElement("option",{placeholder:"1 mile"},"1 mile"),l.a.createElement("option",{placeholder:"5 miles"},"5 miles"),l.a.createElement("option",{placeholder:"10 miles"},"10 miles"),l.a.createElement("option",{placeholder:"25 miles"},"25 miles"),l.a.createElement("option",{selected:!0,placeholder:"50 miles"},"50 miles"))):l.a.createElement("h1",{className:"gettingEvents"},"getting events..."),this.state.eventsByMilage?l.a.createElement(y,{events:this.state.eventsByMilage}):l.a.createElement(f,null))}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).clickHandler=function(e){a.setState({date:e.target.value})},a.getMetroAndEvents=function(){!a.state.date&&a.state.latitude?alert("Please choose a location and a date."):fetch("/getMetroAndEvents?location=".concat(a.state.latitude,",").concat(a.state.longitude,"&date=").concat(a.state.date)).then((function(e){return e.json()})).then((function(e){if(e.error)alert(e.error);else{var t=a.breakUpByDay(e);a.sortEachDay(t),a.setState({events:t})}}))},a.breakUpByDay=function(e){var t=[],n=0,l=1,r=!0,s=!1,o=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){var m=c.value;if(m.distance=a.distance(a.state.latitude,a.state.longitude,m.venue.lat,m.venue.lng,"N"),l>=e.length){var d={};d.date=e[n].start.date,d.events=e.slice(n,l),t.push(d)}else if(e[n].start.date!==e[l].start.date){var u={};u.date=e[n].start.date,u.events=e.slice(n,l),n=l,l+=1,t.push(u)}else l+=1}}catch(v){s=!0,o=v}finally{try{r||null==i.return||i.return()}finally{if(s)throw o}}return t},a.sortEachDay=function(e){var t=!0,a=!1,n=void 0;try{for(var l,r=e[Symbol.iterator]();!(t=(l=r.next()).done);t=!0){var s=l.value;s.events=s.events.sort((function(e,t){return null===e.distance?1:null===t.distance?-1:e.distance>t.distance?1:-1}))}}catch(o){a=!0,n=o}finally{try{t||null==r.return||r.return()}finally{if(a)throw n}}},a.distance=function(e,t,a,n,l){if(e===a&&t===n)return 0;if(null==a)return null;var r=Math.PI*e/180,s=Math.PI*a/180,o=t-n,c=Math.PI*o/180,i=Math.sin(r)*Math.sin(s)+Math.cos(r)*Math.cos(s)*Math.cos(c);return i>1&&(i=1),i=60*(i=180*(i=Math.acos(i))/Math.PI)*1.1515,"K"===l&&(i*=1.609344),"N"===l&&(i*=.8684),i},a.state={latitude:null,longitude:null,date:null,events:null},a.getGeoFromAddress=a.getGeoFromAddress.bind(Object(d.a)(a)),a.getGeoFromGeoButton=a.getGeoFromGeoButton.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getGeoFromGeoButton",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){return e.setState({latitude:t.coords.latitude,longitude:t.coords.longitude})}))}},{key:"getGeoFromAddress",value:function(e){var t=this,a=document.querySelector(".addressMessage");a.innerHTML="Getting results...",e.preventDefault();var n=e.target.searchBar.value;n.length>0?fetch("/searchAddress?q=".concat(n)).then((function(e){return e.json()})).then((function(e){e.error?alert(e.error):(t.setState({latitude:e.lat,longitude:e.lng}),a.innerHTML="")})):alert("Please enter an address.")}},{key:"render",value:function(){var e=this;return l.a.createElement(v.a,null,l.a.createElement("div",{className:"main"},l.a.createElement(h.c,null,l.a.createElement(h.a,{path:"/main"},l.a.createElement("h3",{className:"findShowsTitle"},"Find Shows Near Me."),l.a.createElement(E,{getGeoFromAddress:this.getGeoFromAddress,latitude:this.state.latitude,longitude:this.state.longitude,getGeoFromGeoButton:this.getGeoFromGeoButton}),this.state.latitude?l.a.createElement(g,{getMetroAndEvents:this.getMetroAndEvents,clickHandler:this.clickHandler,date:this.state.date,lat:this.state.latitude}):null),l.a.createElement(h.a,{path:"/events",render:function(t){return l.a.createElement(N,Object.assign({},t,{totalEvents:e.state.events}))}}))))}}]),t}(n.Component),M=function(){return l.a.createElement("div",{className:"landingPageDiv"},l.a.createElement("h1",{className:"welcomeInstructions"},"You give us a ",l.a.createElement("span",{className:"welcomeLocation"},"location")," and a ",l.a.createElement("span",{className:"welcomeDate"},"date")),l.a.createElement("h2",{className:"secondWelcomeInstruction"},"We'll give you a list of concerts near ",l.a.createElement("span",{className:"welcomeYou"},"you"),"."),l.a.createElement(v.b,{to:"/main"},l.a.createElement("button",{className:"launchButton"},"See Shows")))},B=a(23),w=a.n(B);function k(){return l.a.createElement("div",{className:"logoDiv"},l.a.createElement("img",{className:"logo",alt:"logo didnt make it",src:w.a}))}var G=function(){return l.a.createElement(v.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(k,null),l.a.createElement(h.c,null,l.a.createElement(h.a,{path:"/",exact:!0,component:M}),l.a.createElement(h.a,{path:"/main",component:b}))))};s.a.render(l.a.createElement(G,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.67ab37b5.chunk.js.map